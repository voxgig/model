#!/usr/bin/env node

const Fs = require('fs')
const Path = require('path')

let { Model } = require('../dist/model.js')

let path = process.argv[2]

if(null == path || '' == path) {
  console.error('ERROR: First argument should be a jsonic model file path.')
  process.exit(1)
}

let fstats = Fs.statSync(path)
let base = path

if (fstats.isFile()) {
  let basedesc = Path.parse(base)
  base = basedesc.dir
}


let src = Fs.readFileSync(path).toString()

let model = new Model({src,path,base})

console.log(JSON.stringify(model.get(),null,2))

